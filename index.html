<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Milky Way Fly-Through</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    width: 100%;
    background: black;
  }
  canvas {
    display: block;
  }
</style>
</head>
<body>
<canvas id="milkyWay"></canvas>
<script>
const canvas = document.getElementById('milkyWay');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const centerX = canvas.width/2;
const centerY = canvas.height/2;
let mouseX = centerX;
let mouseY = centerY;

// Create 3D stars for Milky Way
const stars = [];
const STAR_COUNT = 1500;

for(let i=0;i<STAR_COUNT;i++){
    const radius = Math.random()*200 + 50;
    const angle = Math.random()*Math.PI*2;
    stars.push({
        x: Math.cos(angle)*radius,
        y: (Math.random()-0.5)*50,
        z: Math.sin(angle)*radius,
        size: Math.random()*1.2+0.5,
        color: `hsl(${Math.random()*60+180}, ${Math.random()*40+60}%, ${Math.random()*30+70}%)`
    });
}

// Shooting stars
const shootingStars = [];
const SHOOTING_COUNT = 5;
for(let i=0;i<SHOOTING_COUNT;i++){
    shootingStars.push({x:0,y:0,z:0,length:0,speed:0,active:false});
}

// Draw a single star as a glowing circle
function drawStar(x,y,size,color){
    const grad = ctx.createRadialGradient(x,y,0,x,y,size);
    grad.addColorStop(0,color);
    grad.addColorStop(0.5,color);
    grad.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(x,y,size,0,Math.PI*2);
    ctx.fill();
}

// Draw frame
function draw(){
    ctx.fillStyle='rgba(0,0,0,0.2)'; // slight trail effect
    ctx.fillRect(0,0,canvas.width,canvas.height);

    for(let s of stars){
        // Move stars forward (toward the camera)
        s.z -= 2;
        if(s.z<-200) s.z = 200; // loop back for continuous fly-through

        const k = 300/(s.z+300);
        const x = s.x*k + centerX + (mouseX-centerX)/50;
        const y = s.y*k + centerY + (mouseY-centerY)/50;
        const size = s.size*k;

        drawStar(x,y,size,s.color);
    }

    // Shooting stars
    for(let s of shootingStars){
        if(!s.active && Math.random()<0.005){
            s.active=true;
            s.x=Math.random()*canvas.width;
            s.y=Math.random()*canvas.height/2;
            s.length=Math.random()*150+50;
            s.speed=Math.random()*15+8;
        }
        if(s.active){
            ctx.strokeStyle='rgba(255,255,255,0.8)';
            ctx.lineWidth=2;
            ctx.beginPath();
            ctx.moveTo(s.x,s.y);
            ctx.lineTo(s.x-s.length,s.y+s.length);
            ctx.stroke();

            s.x+=s.speed;
            s.y+=s.speed;

            if(s.x>canvas.width || s.y>canvas.height) s.active=false;
        }
    }

    requestAnimationFrame(draw);
}

draw();

window.addEventListener('resize',()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
window.addEventListener('mousemove',(e)=>{
    mouseX = e.clientX;
    mouseY = e.clientY;
});
</script>
</body>
</html>
