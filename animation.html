<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Milky Way Animation</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: radial-gradient(ellipse at bottom, #000011 0%, #000000 100%);
    height: 100%;
    width: 100%;
    cursor: none; /* Optional: hides cursor for more immersive effect */
  }
  canvas {
    display: block;
  }
</style>
</head>
<body>
<canvas id="milkyWay"></canvas>
<script>
const canvas = document.getElementById('milkyWay');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const centerX = canvas.width/2;
const centerY = canvas.height/2;
let mouseX = centerX;
let mouseY = centerY;

// Stars
const stars = [];
const STAR_COUNT = 1200;

// Shooting stars
const shootingStars = [];
const SHOOTING_COUNT = 7;

// Spiral galaxy star generation
for(let i=0;i<STAR_COUNT;i++){
    const angle = Math.random()*2*Math.PI;
    const radius = Math.random()*canvas.width/2;
    stars.push({
        x: centerX + Math.cos(angle)*radius,
        y: centerY + Math.sin(angle)*radius,
        z: Math.random()*1000,
        size: Math.random()*1.5 + 0.5,
        angle: angle,
        radius: radius,
        color: `hsl(${Math.random()*50+180}, 80%, ${Math.random()*50+50}%)` // soft bluish/white stars
    });
}

// Shooting stars init
for(let i=0;i<SHOOTING_COUNT;i++){
    shootingStars.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height/2,
        length: 0,
        speed: Math.random()*15+8,
        active:false
    });
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw stars
    for(let i=0;i<stars.length;i++){
        let s = stars[i];
        s.angle += 0.0007*(s.radius+1);

        // 3D parallax based on mouse
        const dx = (mouseX-centerX)/200;
        const dy = (mouseY-centerY)/200;

        const x = centerX + Math.cos(s.angle)*s.radius + dx*s.radius/10;
        const y = centerY + Math.sin(s.angle)*s.radius + dy*s.radius/10;
        const k = 200/(s.z+1);
        const size = s.size*k;

        ctx.fillStyle = s.color;
        ctx.fillRect(x,y,size,size);
    }

    // Draw shooting stars with motion blur
    for(let i=0;i<shootingStars.length;i++){
        let s = shootingStars[i];
        if(!s.active && Math.random()<0.006){
            s.active=true;
            s.x=Math.random()*canvas.width;
            s.y=Math.random()*canvas.height/2;
            s.length=0;
        }
        if(s.active){
            ctx.strokeStyle = 'rgba(255,255,255,0.8)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(s.x, s.y);
            ctx.lineTo(s.x - s.length, s.y + s.length);
            ctx.stroke();

            // motion blur trail effect
            for(let t=1;t<5;t++){
                ctx.strokeStyle = `rgba(255,255,255,${0.1*t})`;
                ctx.beginPath();
                ctx.moveTo(s.x - s.speed*t, s.y + s.speed*t);
                ctx.lineTo(s.x - s.length - s.speed*t, s.y + s.length + s.speed*t);
                ctx.stroke();
            }

            s.x += s.speed;
            s.y += s.speed;
            s.length += s.speed;

            if(s.x>canvas.width || s.y>canvas.height){
                s.active=false;
            }
        }
    }

    requestAnimationFrame(draw);
}

draw();

window.addEventListener('resize', ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
window.addEventListener('mousemove', (e)=>{
    mouseX = e.clientX;
    mouseY = e.clientY;
});
</script>
</body>
</html>
